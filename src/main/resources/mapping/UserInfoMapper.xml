<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.hundsun.jerry.icity.mapper.UserInfoMapper">
    <!-- 定义数据库字段与实体对象的映射关系 -->
    <resultMap type="com.hundsun.jerry.icity.model.UserInfo" id="UserInfoBaseMap">
        <id column="u_id" property="userId" jdbcType="BIGINT"/>
        <result column="true_name" property="userTrueName" jdbcType="VARCHAR"/>
        <result column="user_nickname" property="userNickname" jdbcType="VARCHAR"/>
        <result column="u_sex" property="sex" jdbcType="VARCHAR"/>
        <result column="birthday" property="birthday" jdbcType="VARCHAR"/>
        <result column="age" property="age" jdbcType="VARCHAR"/>
        <result column="qq" property="qqNumber" jdbcType="VARCHAR"/>
        <result column="introduce" property="introduction" jdbcType="VARCHAR"/>
        <result column="declaration" property="declaration" jdbcType="VARCHAR"/>
        <result column="profession" property="profession" jdbcType="VARCHAR"/>
        <result column="u_name" property="userName" jdbcType="VARCHAR"/>
    </resultMap>

    <!-- 定义参数模型 -->
    <parameterMap type="com.hundsun.jerry.icity.model.UserInfo" id="UserInfoParam">
        <parameter property="userId"/>
        <parameter property="userTrueName"/>
        <parameter property="userNickname"/>
        <parameter property="sex"/>
        <parameter property="birthday"/>
        <parameter property="age"/>
        <parameter property="qqNumber"/>
        <parameter property="introduction"/>
        <parameter property="declaration"/>
        <parameter property="profession"/>
        <parameter property="userName"/>
    </parameterMap>

    <!-- 通过id选择用户信息 -->
    <select id="selectByUserId" parameterType="java.lang.Long" resultMap="UserInfoBaseMap">
        SELECT * FROM user_info
        WHERE u_id = #{userId}
    </select>

    <!-- 通过userName选择用户信息 -->
    <select id="selectByUsername" parameterType="String" resultMap="UserInfoBaseMap">
        SELECT * FROM user_info
        WHERE u_name = #{userName}
    </select>

    <!-- 更新用户个人资料 -->
    <update id="updateUserInfo" parameterType="com.hundsun.jerry.icity.model.UserInfo" >
        UPDATE user_info
        <set>
            <if test="truename != null">true_name=#{userTrueName},</if>
            <if test="usernickename != null">user_nickname=#{userNickname},</if>
            <if test="sex != null">u_sex=#{Sex},</if>
            <if test="birthday != null">birthday=#{Birthday},</if>
            <if test="age != null">age=#{Age},</if>
            <if test="qqnumber != null">qq=#{QQNumber},</if>
            <if test="introduction != null">introduction=#{Introduction},</if>
            <if test="declaration != null">declaration=#{Declaration},</if>
            <if test="profession != null">profession=#{Profession},</if>
            <if test="name != null">u_name=#{userName},</if>
        </set>
        WHERE u_id=#{id}
    </update>

    <!-- 创建新用户资料 -->
    <insert id="addUserInfo" parameterType="com.hundsun.jerry.icity.model.UserInfo" >
        INSERT INTO user_info (true_name,user_nickname,u_sex,birthday,age,qq,introduce,declaration,profession,u_name)
        VALUES (#{NULL},#{NULL},#{NULL},#{NULL},#{NULL},#{NULL},#{NULL},#{NULL},#{userName})
    </insert>


</mapper>